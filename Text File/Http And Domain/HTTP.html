<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body>How web server and HTTP protocol works<br><br><a href="http://ဟိုတနေ.ကတော့">ဟိုတနေ.ကတော့</a> web browser တွေအလုပ်လုပ်ပုံပေါ့။ ခုဒါကတော့ web server တွေဘယ်လိုအလုပ်လုပ်သလဲဆိုတာ။ Web server <a href="http://တွေရဲ.အလုပ်လုပ်ပံကို">တွေရဲ.အလုပ်လုပ်ပံကို</a> web developer တွေ server side application developer <a href="http://တွေအနေနဲ.နားလည်ထားသင့်တယ်">တွေအနေနဲ.နားလည်ထားသင့်တယ်</a>။ User တွေက browser တွေကိုတော့သုံးကြတယ်။ မြင်သာတယ် နောက်ကွယ်က web server ကိုတော့သိပ်မမြင်သာဘူး။ Browser သည် HTTP client ဖြစ်ပြီးတော့ web server&nbsp; သည် HTTP server&nbsp; ဖြစ်တယ်။ ဆိုချင်တာက networking အရဆိုရင် web သည် client server architecture အရတည်ဆောက်ထားတာ။ Client သည် သူလိုတာကိုတောင်းမယ်။ ဥပမာ ငါ့ကို ဒီ web URL ကနေ page ကိုခေါ်ပေးဆိုပြီး browser ကိုတောင်းတယ်။ ဒါကို&nbsp; request <a href="http://လို.သုံးမယ်">လို.သုံးမယ်</a>။ နောက် အဲ့ဒီ request ပြေလည်ဖို. browser&nbsp; ရဲ. networking moudule ကနေ HTTP Protocol ကိုသုံးပြီး web server ဆီကိုဆက်သွယ်တယ်။ ဒီကြားထဲမှာ ဖြတ်သွားရတဲ့ networking layer တွေရှိတယ် မပြောတော့ဘူး။ အဲ့ဒီတော့ ကွန်ပျူတာ တလုံး နဲ. တလုံးနားလည်ဖို. ကြားထဲမှာ ဆက်သွယ်ရေးအတွက် တဖက်က&nbsp; ဘာပေးရင် နောက်တဖက်က ဘာပြန်ပေးမယ် ဆိုတာကို protocol <a href="http://လို.ခေါ်ကြတယ်">လို.ခေါ်ကြတယ်</a>။ web client နဲ. web browser ကြားသုံးတဲ့ protocl သည် HTTP protocol ပဲ။ Hyper Text Trasnsfer Protocol <a href="http://လို.ဆိုကြတယ်">လို.ဆိုကြတယ်</a>။ ဒီ protocol ကိုနားလည်ရင် web server ကို လိုချင်တဲ့ web resource ဥပမာ html page, css file, image အစရှိတာတွေ <a href="http://လှမ်းတောင်းလို.ရမယ်">လှမ်းတောင်းလို.ရမယ်</a>။ ဒါကြောင့် web server ဆီကို browser ကနေ ပဲဆက်သွယ် ဆက်သွယ် မဟုတ်လို. program ကနေပဲ networking code ရေးပြီးဆက်သွယ်လဲ web server သည် နားလည်နေတာ။ ဆိုချင်တာက web server သည် HTTP Protocol ကိုနားလည်တယ်။ အဲ့တော့ <a href="http://ဘယ်သူပို.တယ်">ဘယ်သူပို.တယ်</a> အရေးမကြီးဘူး ။ HTTP protocol <a href="http://ကနေပို.ရင်">ကနေပို.ရင်</a> ရပြီ။ ဒါကိုဆိုချင်တာ။ ဥပမာ android code ကနေ networking library တွေသုံးပြီး web server ဆီကို REST <a href="http://လှမ်းခေါ်တာမျိုးလုပ်လို.ရမယ်">လှမ်းခေါ်တာမျိုးလုပ်လို.ရမယ်</a>။ User ကမမြင်ရပေမဲ့ web server နဲ. client ကြားမှာ&nbsp;&nbsp; HTTTP <a href="http://နဲ.ပဲသွားနေတာ">နဲ.ပဲသွားနေတာ</a>။<br><br>အောက်ကပုံက client နဲ. server ကြား ဘယ်လို သွားတယ်ဆိုတာကိုပြထားတာ။ Web client (Browser) နဲ. web server ကြားပေါ့။ Web server ကိုသေချာနားလည်ဖို. HTTP protocol <a href="http://ကိုအရင်နားလည်ဖို.လိုတယ်">ကိုအရင်နားလည်ဖို.လိုတယ်</a>။<br><br>Protocol ဆိုတာ computer <a href="http://တလုံးနဲ.တလုံးကြား">တလုံးနဲ.တလုံးကြား</a> ဟန်ချက်ညီညီ <a href="http://ဆက်သွယ်ဖို.လုပ်ထားတဲ့">ဆက်သွယ်ဖို.လုပ်ထားတဲ့</a> <a href="http://သဘောတူညီမှူ.လို">သဘောတူညီမှူ.လို</a> <a href="http://အကြမ်းဖျင်းဆိုလို.ရမယ်">အကြမ်းဖျင်းဆိုလို.ရမယ်</a>။ Low level TCP/IP Protocol&nbsp; တွေသည် binary data အနေနဲ.&nbsp; transer လုပ်ကြတယ်။ Application level protocol တွေဖြစ်တဲ့ TCP/IP ကို HTTP အတွက်သုံးတယ်။ ဆိုချင်တာက HTTP သည် TCPကို အခြေခံထားတဲ့ text based protocol <a href="http://ဖြစ်တယ်လို.ပြောတာ">ဖြစ်တယ်လို.ပြောတာ</a>။ နားလည်လွယ်အောင်ပြောတာဒါက။ အဲ့တော့ web client သည် web server ကို communicate လုပ်ဖို. အရင်ဆုံး TCP connection စဖွင့်ရတယ်။ ဒါကို Java မှာ&nbsp; Socket ဆိုတဲ့ class <a href="http://နဲ.လုပ်လို.ရတယ်">နဲ.လုပ်လို.ရတယ်</a> ။ ပြီးရင် HTTP request message ကို server ဆီကို <a href="http://ပို.လို.ရပြီ">ပို.လို.ရပြီ</a>။ နောက် HTTP protocol သည် request -response protocol <a href="http://လို.ခေါ်တယ်">လို.ခေါ်တယ်</a>။ <a href="http://ဘာလို.လဲဆိုတော့">ဘာလို.လဲဆိုတော့</a> web client သည် သူလိုချင်တာကို တောင်းရမယ် ပထမဆုံး ဒါကို request <a href="http://လို.ခေါ်တယ်">လို.ခေါ်တယ်</a>။ အဲ့ဒီ request ကို server ကနေ ဖတ်မယ်။ Clent ဘာတောင်းတာလဲကြည့်မယ် အဆင်ပြေရင် ပြန်ပေးမယ် ဒါကို response <a href="http://လို.ခေါ်တယ်">လို.ခေါ်တယ်</a>။ Request တခုလုပ်မယ် <a href="http://သူ.အတွက်">သူ.အတွက်</a> response တခုပြန်လာမယ်။ နောက်&nbsp;&nbsp; HTTP protocol ကို statless protocol <a href="http://လို.ခေါ်သေးတယ်">လို.ခေါ်သေးတယ်</a> <a href="http://။ဘာလို.လဲဆိုတော့">။ဘာလို.လဲဆိုတော့</a> ခုနက Request လာတယ် server ကနေ response ကိုပြန်တယ်။ server သည် client က ဘယ် request မှာ ဘာတောင်းတယ်ဆိုတဲ့ ဟာမျိုး ဘာ data ကိုမှ မှတ်မထားဘူး။ ဒါကြောင့် server သည် client&nbsp; ရဲ. အခြေအနေ ဘာတခုမှမသိဘူး <a href="http://ဒါကြောင့်သူ.ကို">ဒါကြောင့်သူ.ကို</a> stateless protocol <a href="http://လို.ခေါ်တယ်">လို.ခေါ်တယ်</a>။ Stateless protocol ဆိုတော့ web application တွေမှာ state <a href="http://ထိန်းဖို.လိုလာပြီ">ထိန်းဖို.လိုလာပြီ</a>။ ဥပမာ login ၀င်ထားတယ်။ page တိုင်းမှာ လိုက်မ၀င်နိုင်ဘူး။ အဲ့တာမျိုးကို state <a href="http://ထိန်းတယ်လို.ခေါ်တယ်">ထိန်းတယ်လို.ခေါ်တယ်</a>။ ထိန်းတဲနည်း နှစ်နည်းရှိတယ်။ Cookies တွေသုံးတာရယ်&nbsp; web server မှာ session <a href="http://ဆိုတာရယ်နဲ.ထိန်းတာ">ဆိုတာရယ်နဲ.ထိန်းတာ</a>။ Cookies သည် browser မှာသိမ်းတဲ့ ဖိုင်ပဲ။ Sesssion ကတော့ web server မှာသိမ်းထားတဲ့ file, request အပေါ်မူတည်ပြီး session id ပေးလိုက်ရင် ဆိုင်ရာ ဆိုင်ရာ session file ထဲမှာ web server ကနေ သိမ်းပေးတယ်။ ဒီလိုနည်းနဲ. state ထိန်းတယ်။HTTP <a href="tel:1.1">1.1</a> /HTTP <a href="tel:2.0">2.0</a>ခုနောက်ဆုံး HTTP protocol version သည် ၂.၀ version <a href="tel:1.1">1.1</a> သည် ဒီမှာ<br><br><a href="https://tools.ietf.org/html/rfc2616">https://tools.ietf.org/html/rfc2616</a><br><br>version 2 <br><br>သည် ဒီမှာ<br><br><a href="https://tools.ietf.org/html/rfc7540">https://tools.ietf.org/html/rfc7540</a><br><br>Protocol ရယ်လို. <a href="http://ဖြစ်ပြီဆိုလို.ရှိရင်">ဖြစ်ပြီဆိုလို.ရှိရင်</a> သွားရမဲ့ message format သည် အတိအကျလိုက်နာရတယ်။ ဒါသည် protocol <a href="http://ရဲ.အသက်ပဲ">ရဲ.အသက်ပဲ</a> \r\n space အဲ့လိုတွေတောင် <a href="http://သူ.နေရာနဲ.သူ">သူ.နေရာနဲ.သူ</a> အဓိပ္ဗာယ်ရှိတယ် (text based protocol မှာပေါ့)။ HTTP မှာအဓိက အသက်က Request Format နဲ.&nbsp; Response format သည်အရေးအကြီးဆုံးပဲ။ Web server တခုရေးတော့မယ်ဆိုရင် ဒီ HTTP/<a href="tel:1.1">1.1</a> လောက်ကို နားလည်ထားရင်အဆင်ပြေပြီ။<br><br>HTTP Request Format<br>အောက်ကပုံက HTTP request format ပုံ <br><br>ပထမဆုံး <a href="http://တွေ.ရတဲ့">တွေ.ရတဲ့</a> line သည် (GET /doc/<a href="http://test.html">test.html</a> HTTP/<a href="tel:1.1">1.1</a>) သည်&nbsp; request line <a href="http://လို.ခေါ်တယ်">လို.ခေါ်တယ်</a> <a href="http://သူ.မှာ">သူ.မှာ</a> <a href="http://သုံးပိုင်းပါတယ်။ဒီလိုခွဲလို.ရတယ်">သုံးပိုင်းပါတယ်။ဒီလိုခွဲလို.ရတယ်</a> <br>HTTP-METHOD RESOURCE_URL HTTP-VERSION<br>ဆိုပြီးတော့ HTTP method နေရာမှာ GET,POST,PUT,DELETE, OPTION, HEAD,TRACE အစရှိတာတွေဖြစ်နိုင်တယ်။ Method အပေါ်မူတည်ပြီး web server ကဘာလုပ်ရမလဲဆိုတာကို ဆုံးဖြတ်တယ်။ ဥပမာ ဒီမှာဆို GET သည် resource တခုကိုတောင်းတာဖြစ်တဲ့အတွက် သူရှာမယ် ဘယ် resource လဲဆိုတာကိုတော့ URL ကနေပြောတယ် ဒီဥပမာ ဆိုရင်တော့ /doc/<a href="http://test.html">test.html</a> ပေ့ါ အဲ့တော့ web server က အဲ့ဖိုင်ကိုရှာမယ် client ကိုပြန်ပေးမယ်ပေါ့ နောက်ဆုံး request line က&nbsp; HTTP/<a href="tel:1.1">1.1</a> ကတော့ client သည် http version <a href="tel:1.1">1.1</a> ကိုနားလည်တယ် server ကို <a href="http://မင်းငါနဲ.ဆက်သွယ်ရင်">မင်းငါနဲ.ဆက်သွယ်ရင်</a> version <a href="tel:1.1">1.1</a> <a href="http://အတိုင်းဆက်သွယ်လို.ရတယ်ဆိုတာကိုပြောတာ။Request">အတိုင်းဆက်သွယ်လို.ရတယ်ဆိုတာကိုပြောတာ။Request</a> line ကို\r\n <a href="http://နဲ.ပိတ်ရတယ်">နဲ.ပိတ်ရတယ်</a> ဒီနေရာမှာ တော့ မမြင်သာဘူး။<br><br>Request line ပြီးသွားတော့ ဘာလာလဲဆိုတော့ request header လာတယ်။ Request header သည် ဘာတွေကိုပြောလဲဆိုတော့ request <a href="http://နဲ.ပတ်သတ်တဲ့meta">နဲ.ပတ်သတ်တဲ့meta</a> dataတွေကိုပြောတယ်။ ဥပမာ&nbsp; Host: hostname သည် ဘာကိုပြောလဲဆိုရင် client သည် test <a href="tel:101">101</a> .com <a href="http://ကိုဆက်သွယ်နေတာလို.ပြောတယ်">ကိုဆက်သွယ်နေတာလို.ပြောတယ်</a>။ Request header တကြောင်းချင်းမှာ key value <a href="http://အနေနဲ.သွားတယ်။ကြားထဲမှာ">အနေနဲ.သွားတယ်။ကြားထဲမှာ</a> semicolon <a href="http://လေးခံရမယ်.အဆုံးသတ်ရင်">လေးခံရမယ်.အဆုံးသတ်ရင်</a> \r\n ထဲ့ရမယ်။နောက် Accept-Encoding သည် ဘာကိုဆိုလိုချင်တာလဲဆိုရင် browser သည် server ကပြန်လာတဲ့ data ကို size သေးသွားအောင် compress လုပ်ပေးမယ်ဆိုလဲဖြစ်တယ် လက်ခံမယ်။ သူလက်ခံနိုင်တဲ့ format သည်&nbsp; gzip format ဖြစ်တယ်ဆိုပြီးပြောတာ။<br><br>နောက်ဆုံး HTTP request message မှာပါတဲ့အပိုင်းကတော့ request body <a href="http://ပဲသူ.ကိုတော့">ပဲသူ.ကိုတော့</a> query string လို data တွေကိုသိမ်းတယ်။ GET ရဲ. request body သည် 64KB လောက်ပဲသိမ်းကြတယ်။ browser <a href="http://တခုနဲ.တခုတော့မတူဘူး">တခုနဲ.တခုတော့မတူဘူး</a>။ ဒါကြောင့် file upload လိုကောင်တွေမှာ POST ကိုသုံးသင့်တယ်။<br><br>HTTP Response <br><br>အောက်ကပုံက response message ပုံ။<br><br>ပထမဆုံးအကြောင်းက status line သူကဘာပြောလဲဆိုတော့ request operation သည် အဆင်ပြေလား မပြေလား အဲ့တာတွေကိုပြောတယ် ဥပမာ <a href="tel:200">200</a> ဆိုရင် အဆင်ပြေတယ်။ OK ပေါ့&nbsp; <a href="tel:500">500</a> ဆိုရင် server မှာ error တခုခုတက်သွားပြီ ဒီလိုဆိုလိုတာ။နောက် ကျတော့ဘာလာလဲဆိုရင် response header လာတယ်။ အဲ့မှာ အရေးကြီးတာက Content-Type:text/html ဆိုပြီး ပါတဲ့ MIME type <a href="http://သူ.ကိုကြည့်ပြီး">သူ.ကိုကြည့်ပြီး</a> browser က html လား image လား css လား ခွဲခြားရတာ။ နောက်ဆုံး header တွေပြီးသွားရင် blank line လာမယ်။ နောက်ဆုံးမှာ response body လာမယ်။ အဲ့မှာ ခုနက request ကတောင်းတဲ့ ကောင်ပါလာမယ်။ html page ကိုတောင်းလို. အောက်ကလိုရမယ်။<br>&lt;h1&gt;My Home Page&lt;/h1&gt;<br>တကယ်လို. image တွေဘာတွေ တောင်းရင် binary content ဖြစ်နေမယ်။ အဲ့တာကိုကြည့်ပြီး browser ကနေ သင့်တော်သလို render လုပ်တာ <br><br>တော်သေးဘီ<br></body></html>